{% extends 'GoproVipacDbprocesoBundle::layout.html.twig' %}
{% block title %}Calculadora de centros de costo y cuentas por asiento{% endblock title %}
{% block titulo %}Calculadora de centros de costo y cuentas por asiento{% endblock titulo %}
{% block content %}

    <form id="fileUpload" action="//jquery-file-upload.appspot.com/" method="POST" enctype="multipart/form-data">
        <!-- Redirect browsers with JavaScript disabled to the origin page -->
        <noscript><input type="hidden" name="redirect" value="http://blueimp.github.io/jQuery-File-Upload/"></noscript>
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="fileupload-buttonbar">
            <div class="fileupload-buttons">
                <!-- The fileinput-button span is used to style the file input field as button -->
            <span class="fileinput-button">
                <span>Agregar archivos...</span>
                <input type="file"
                    name="archivos[]"
                    multiple data-url="/path/to/upload/handler.json"
                    data-sequential-uploads="true"
                    data-form-data='{"script": "true"}'
                >
            </span>
                <button type="submit" class="start">Iniciar carga</button>
                <button type="reset" class="cancel">Cancelar carga</button>
                <button type="button" class="delete">Borrar</button>
                <input type="checkbox" class="toggle">
                <!-- The global file processing state -->
                <span class="fileupload-process"></span>
            </div>
            <!-- The global progress state -->
            <div class="fileupload-progress fade" style="display:none">
                <!-- The global progress bar -->
                <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                <!-- The extended global progress state -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The table listing the files available for upload/download -->
        <table role="presentation"><tbody class="files"></tbody></table>
    </form>

    <div id="carga">
        <h1>Agregar archivo</h1>
        <div id="archivosForm">
            <form action="#" method="post" {{ form_enctype(formulario) }}>
                {{ form_widget(formulario) }}

                <input type="submit" value="Subir archivo" />
            </form>
        </div>
    </div>

    {% if archivosAlmacenados|default %}
        <div id="archivos">
            <h1>Listado de Archivos</h1>
            <table id="listado">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Fecha de creaci√≥n</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                {% for archivo in archivosAlmacenados %}
                    <tr rel="{{ archivo.id }}">
                        <td class="nombre">{{ archivo.nombre }}</td>
                        <td>{{ archivo.creado | date('d-m-Y H:i:s') }}</td>
                        <td>
                            <a href="{{ path('gopro_vipac_dbproceso_proceso_calcc', {'archivoEjecutar': archivo.id}) }}">Procesar</a>
                            <a class="ajaxLink" rel="{{ archivo.id }}" href="{{ path('gopro_vipac_dbproceso_proceso_borrararchivo') }}">Borrar</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
    {% if mensajes|default %}
        <div id="mensajes">
            <h1>Mensajes del proceso</h1>
            <ul>
                {% for mensaje in mensajes %}
                    <li>{{ mensaje }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endblock content %}





